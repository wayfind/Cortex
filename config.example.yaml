# Cortex 配置示例
#
# 使用方法：
# 1. 复制此文件：cp config.example.yaml config.yaml
# 2. 修改 config.yaml 中的所有 "your-xxx-here" 占位符为实际值
# 3. 切勿将 config.yaml 提交到 Git（已在 .gitignore 中排除）
#
# ⚠️ 重要：所有敏感信息（API Key、Token、密钥）都应配置在 config.yaml 中

# Agent 配置
agent:
  id: "node-001"  # 节点唯一标识
  name: "Cortex Node 1"  # 节点名称
  mode: "standalone"  # 运行模式: standalone | cluster

  # 集群模式配置（仅在 mode=cluster 时需要）
  upstream_monitor_url: ""  # 上级 Monitor URL，如 https://monitor.example.com

# Probe 配置
probe:
  # Web 服务配置
  host: "0.0.0.0"  # Probe Web 服务监听地址
  port: 8001  # Probe Web 服务端口

  # 调度配置
  schedule: "*/5 * * * *"  # Cron 表达式：每 5 分钟执行一次
  timeout_seconds: 300  # 巡检超时时间（秒）

  # 工作区配置
  workspace: "./probe_workspace"  # probe_workspace 目录路径

  # 报告配置
  report_retention_days: 30  # 报告保留天数

  # 巡检项目配置
  checks:
    system_health: true  # 系统健康检查
    service_status: true  # 服务状态检查
    log_analysis: true  # 日志分析
    network_check: true  # 网络连通性检查

  # 阈值配置
  thresholds:
    cpu_percent: 80  # CPU 使用率告警阈值
    memory_percent: 85  # 内存使用率告警阈值
    disk_percent: 90  # 磁盘使用率告警阈值

# Monitor 配置
monitor:
  host: "0.0.0.0"  # 监听地址
  port: 8000  # 监听端口
  database_url: "sqlite:///./cortex.db"  # 数据库 URL

  # 节点注册配置
  registration_token: "your-secret-registration-token"  # 节点注册密钥

# Claude API 配置
claude:
  api_key: "your-claude-api-key-here"  # Claude API Key (从 https://console.anthropic.com 获取)
  model: "claude-sonnet-4"  # 模型名称
  max_tokens: 2000  # 最大 token 数
  timeout: 30  # 请求超时时间（秒）
  temperature: 1.0  # 生成温度 (0.0-1.0，越高越随机)

# Telegram 通知配置
telegram:
  enabled: false  # 是否启用 Telegram 通知
  bot_token: "your-telegram-bot-token-here"  # Bot Token (从 @BotFather 获取)
  chat_id: "your-telegram-chat-id-here"  # Chat ID (从 @userinfobot 获取)

# Intent-Engine 配置
intent_engine:
  enabled: true  # 是否启用意图记录
  database_url: "sqlite:///./cortex_intents.db"  # Intent 数据库 URL

# 日志配置
logging:
  level: "INFO"  # 全局日志级别: DEBUG | INFO | WARNING | ERROR | CRITICAL
  format: "standard"  # 日志格式: standard | json | simple

  # 控制台输出配置
  console: true  # 是否输出到控制台
  console_level: null  # 控制台日志级别（可选，默认使用 level）

  # 文件输出配置
  file: "logs/cortex.log"  # 日志文件路径
  file_level: null  # 文件日志级别（可选，默认使用 level）

  # 轮转和保留策略
  rotation: "10 MB"  # 轮转策略：按大小 "10 MB" | 按时间 "1 day" | 按时间点 "00:00"
  retention: "30 days"  # 保留时间："30 days" | "1 week" | 10（保留文件数）
  compression: "zip"  # 压缩格式: zip | gz

  # 模块级别配置（可选）
  modules:
    cortex.monitor: "DEBUG"  # Monitor 模块使用 DEBUG 级别
    cortex.probe: "INFO"  # Probe 模块使用 INFO 级别
    # cortex.common.cache: "WARNING"  # 减少缓存日志（按需启用）

# 认证配置
auth:
  secret_key: "your-secret-key-change-this-in-production"  # JWT 密钥（请生成随机密钥）
  algorithm: "HS256"  # JWT 算法
  access_token_expire_minutes: 30  # Token 过期时间（分钟）

# 性能配置
performance:
  # API 速率限制
  rate_limit:
    enabled: true
    reports: 100  # 上报接口限制（次/分钟/节点）
    queries: 1000  # 查询接口限制（次/分钟/用户）

  # 缓存配置
  cache:
    enabled: false  # 是否启用缓存
    backend: "memory"  # 缓存后端: memory | redis
    redis_url: "redis://localhost:6379/0"  # Redis URL（如使用）

# 数据保留策略
data_retention:
  reports_days: 30  # 报告保留天数
  alerts_days: 90  # 告警保留天数（已解决）
  decisions_days: 180  # 决策记录保留天数
